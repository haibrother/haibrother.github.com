<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>MYSQL技术手册</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
<meta name="description" content="如果你想联系我，请发邮件给我！">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book">
<div class="titlepage">
<div>
<div><h1 class="title">
<a name="id628365"></a>MYSQL技术手册</h1></div>
<div><div class="author">
<h3 class="author"></h3>
<div class="affiliation"><div class="address"><p><br>
            <code class="email">&lt;<a class="email" href="mailto:bilehai@foxmail.com">bilehai@foxmail.com</a>&gt;</code><br>
            <span class="otheraddr">www.haibrother.com</span><br>
            <span class="street">162 Guelph Street</span><br>
              <span class="city">广东省深圳市龙华新区惠鑫公寓</span><br>
              <span class="state">ON</span><br>
              <span class="country">中国</span><br>
              <span class="postcode">518109</span><br>
              <span class="phone">15019423109</span><br>
        </p></div></div>
</div></div>
<div><p class="copyright">Copyright © 2012 haibrother</p></div>
<div><div class="abstract">
<p class="title"><b>Abstract</b></p>
<p>如果你想联系我，请发邮件给我！</p>
</div></div>
</div>
<hr>
</div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="chapter"><a href="#id628437">1. 数据库概述</a></span></dt>
<dd><dl>
<dt><span class="sect1"><a href="#id628461">数据库技术构成</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628495">数据库系统</a></span></dt>
<dt><span class="sect2"><a href="#id628504">SQL语言</a></span></dt>
</dl></dd>
</dl></dd>
<dt><span class="chapter"><a href="#id628516">2. windows 平台安装与配置MYSQL</a></span></dt>
<dd><dl>
<dt><span class="sect1"><a href="#id628525">安装与配置MYSQL</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628537">安装MYSQL</a></span></dt>
<dt><span class="sect2"><a href="#id628550">配置MYSQL</a></span></dt>
</dl></dd>
</dl></dd>
<dt><span class="chapter"><a href="#id628566">3. 创建、修改和删除表</a></span></dt>
<dd><dl>
<dt><span class="sect1"><a href="#id628570">创建表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628579">创建表的语法形式</a></span></dt>
<dt><span class="sect2"><a href="#id628682">设置表的主键</a></span></dt>
<dt><span class="sect2"><a href="#id628713">设置表的外键</a></span></dt>
<dt><span class="sect2"><a href="#id628718">设置表的非空约束</a></span></dt>
<dt><span class="sect2"><a href="#id628732">设置表的属性自动增加</a></span></dt>
<dt><span class="sect2"><a href="#id628743">设置表的属性的默认值</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628755">查看表结构</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628760">查看基本结构语句 DESCRIBE</a></span></dt>
<dt><span class="sect2"><a href="#id628771">查看表详细结构语句 SHOW CREATE TABLE</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628777">修改表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628785">修改表名</a></span></dt>
<dt><span class="sect2"><a href="#id628796">修改字段的数据类型</a></span></dt>
<dt><span class="sect2"><a href="#id628807">修改字段名</a></span></dt>
<dt><span class="sect2"><a href="#id628818">增加字段</a></span></dt>
<dt><span class="sect2"><a href="#id628828">删除字段</a></span></dt>
<dt><span class="sect2"><a href="#id628839">修改字段的排列位置</a></span></dt>
<dt><span class="sect2"><a href="#id628845">更改表的存储引擎</a></span></dt>
<dt><span class="sect2"><a href="#id628856">删除表的外键约束</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628862">删除表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628867">删除没有被关联的普通表</a></span></dt>
<dt><span class="sect2"><a href="#id628872">删除被其他表关联的父表</a></span></dt>
</dl></dd>
</dl></dd>
<dt><span class="chapter"><a href="#id628879">4. 数据库索引</a></span></dt>
<dd><dl>
<dt><span class="sect1"><a href="#id628887">索引简介</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628896">索引的含义和特点</a></span></dt>
<dt><span class="sect2"><a href="#id628914">索引的分类</a></span></dt>
<dt><span class="sect2"><a href="#id628956">索引的设计原则</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628992">创建索引</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id629000">查看表的数据结构及索引</a></span></dt>
<dt><span class="sect2"><a href="#id629011">创建表的时候创建索引</a></span></dt>
<dt><span class="sect2"><a href="#id629046">在已经存在的表上创建索引</a></span></dt>
<dt><span class="sect2"><a href="#id629108">用ALTER TABLE 语句来创建索引</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id629126">删除索引</a></span></dt>
</dl></dd>
<dt><span class="chapter"><a href="#id629148">5. 触发器</a></span></dt>
<dd><dl>
<dt><span class="sect1"><a href="#id629152">创建触发器</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id629157">创建只有一个执行语句的触发器</a></span></dt>
<dt><span class="sect2"><a href="#id629162">创建有多个执行语句的触发器</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id629168">查看触发器</a></span></dt>
<dt><span class="sect1"><a href="#id629174">触发器的使用</a></span></dt>
<dt><span class="sect1"><a href="#id629180">删除触发器</a></span></dt>
</dl></dd>
</dl>
</div>
<div class="list-of-tables">
<p><b>List of Tables</b></p>
<dl><dt>3.1. <a href="#id628594">MYSQL中基本的完整性约束条件</a>
</dt></dl>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="id628437"></a>Chapter 1. 数据库概述</h1></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#id628461">数据库技术构成</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628495">数据库系统</a></span></dt>
<dt><span class="sect2"><a href="#id628504">SQL语言</a></span></dt>
</dl></dd>
</dl>
</div>
<p>数据库理论基础 </p>
<table border="0" summary="Simple list" class="simplelist">
<tr><td>数据存储方式</td></tr>
<tr><td>数据库泛型</td></tr>
<tr><td>数据库在开发中的应用</td></tr>
</table>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628461"></a>数据库技术构成</h2></div></div></div>
<p>　由于MySQL是开放源代码的，因此任何人都可以在General Public License的许可下下载并根据个性化的需要对其进行修改。MySQL因为其速度、可靠性和适应性而备受关注。大多数人都认为在不需要事务化处理的情况下，MySQL是管理内容最好的选择。
    　　MySQL这个名字，起源不是很明确。一个比较有影响的说法是，基本指南和大量的库和工具带有前缀“my”已经有10年以上，而且不管怎样，MySQL AB创始人之一的Monty Widenius的女儿也叫My。这两个到底是哪一个给出了MySQL这个名字至今依然是个迷，包括开发者在内也不知道。
    　　MySQL的海豚标志的名字叫“sakila”，它是由MySQL AB的创始人从用户在“海豚命名”的竞赛中建议的大量的名字表中选出的。获胜的名字是由来自非洲斯威士兰的开源软件开发者Ambrose Twebaze提供。根据Ambrose所说，Sakila来自一种叫SiSwati的斯威士兰方言，也是在Ambrose的家乡乌干达附近的坦桑尼亚的Arusha的一个小镇的名字。
    　　MySQL，虽然功能未必很强大，但因为它的开源、广泛传播，导致很多人都了解到这个数据库。它的历史也富有传奇性。
    </p>
<p>
        MySQL的历史最早可以追溯到1979年，那时Oracle也才小打小闹，微软的SQL Server影子都没有。有一个人叫Monty Widenius, 为一个叫TcX的小公司打工，并用BASIC设计了一个报表工具，可以在4M主频和16KB内存的计算机上运行。过了不久，又将此工具，使用C语言重写，移植到Unix平台，当时，它只是一个很底层的面向报表的存储引擎。这个工具叫做Unireg。
    </p>
<p>
        1990年，TcX的customer 中开始有人要求要为它的API提供SQL支持，当时，有人想到了直接使用商用数据库算了，但是Monty觉得商用数据库的速度难令人满意。于是，他直接借助于mSQL的代码，将它集成到自己的存储引擎中。但不巧的是，效果并不太好。于是, Monty雄心大起，决心自己重写一个SQL支持。
    </p>
<p>
        1996年，MySQL 1.0发布,只面向一小拨人，相当于内部发布。到了96年10月，MySQL 3.11.1发布了，呵呵，没有2.x版本。最开始，只提供了Solaris下的二进制版本。一个月后，Linux版本出现了。
    </p>
<p>
        紧接下来的两年里，MySQL依次移植到各个平台下。它发布时，采用的许可策略，有些与众不同：允许免费商用，但是不能将MySQL与自己的产品绑定在一起发布。如果想一起发布，就必须使用特殊许可，意味着要花银子。当然，商业支持也是需要花银子的。其它的，随用户怎么用都可以。这种特殊许可为MySQL带来了一些收入，从而为它的持续发展打下了良好的基础。（细想想，PostgreSQL曾经有几年限入低谷，可能与它的完全免费，不受任何限制有关系）。
    </p>
<p>
        MySQL3.22应该是一个标志性的版本，提供了基本的SQL支持。
　　MySQL关系型数据库于1998年1月发行第一个版本。它使用系统核心提供的多线程机制提供完全的多线程运行模式，提供了面向C、C++、Eiffel、Java、Perl、PHP、Python以及Tcl等编程语言的编程接口（APIs），支持多种字段类型并且提供了完整的操作符支持查询中的SELECT和WHERE操作。
    </p>
<p>
        1999-2000年，有一家公司在瑞典成立了，叫MySQL AB (不知道AB是什么意思，待查)。 雇了几个人,与Sleepycat合作，开发出了 Berkeley DB引擎, 因为BDB支持事务处理，所以，MySQL从此开始支持事务处理了。
　　2000年4月，MySQL对旧的存储引擎进行了整理，命名为MyISAM。同时，2001年，Heikiki Tuuri向MySQL提出建议，希望能集成他们的存储引擎InnoDB，这个引擎同样支持事务处理，还支持行级锁。
    </p>
<p>
        MySQL与InnoDB的正式结合版本是4.0。
　　到了MySQL5.0，2003年12月，开始有View, 存储过程之类的东东，当然，其间, bug也挺多。
　　在2008年1月16号 MySQL被Sun公司收购。
　　最近，MySQL的创始人Monty Widenius已经向Sun提交了辞呈。head都要走了。
　　据说，被Sun收购的公司多薄命，不知道MySQL今后前途如何，希望一路走好。相信MySQL的生命力还是很长久的。
　　时至今日 mysql 和 php 的结合绝对是完美.很多大型的网站也用到mysql数据库.mysql的发展前景是非常光明的!
    </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628495"></a>数据库系统</h3></div></div></div>
<p>数据库系统 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628504"></a>SQL语言</h3></div></div></div>
<p>SQL语言 </p>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="id628516"></a>Chapter 2. windows 平台安装与配置MYSQL</h1></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#id628525">安装与配置MYSQL</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628537">安装MYSQL</a></span></dt>
<dt><span class="sect2"><a href="#id628550">配置MYSQL</a></span></dt>
</dl></dd>
</dl>
</div>
<p>windows 平台安装与配置MYSQL </p>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628525"></a>安装与配置MYSQL</h2></div></div></div>
<p>節內容.11.. </p>
<p>節內容.11.. </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628537"></a>安装MYSQL</h3></div></div></div>
<p>節內容.11.. </p>
<p>節內容.11.. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628550"></a>配置MYSQL</h3></div></div></div>
<p>節內容.11.. </p>
<p>節內容.11.. </p>
</div>
</div>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="id628566"></a>Chapter 3. 创建、修改和删除表</h1></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#id628570">创建表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628579">创建表的语法形式</a></span></dt>
<dt><span class="sect2"><a href="#id628682">设置表的主键</a></span></dt>
<dt><span class="sect2"><a href="#id628713">设置表的外键</a></span></dt>
<dt><span class="sect2"><a href="#id628718">设置表的非空约束</a></span></dt>
<dt><span class="sect2"><a href="#id628732">设置表的属性自动增加</a></span></dt>
<dt><span class="sect2"><a href="#id628743">设置表的属性的默认值</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628755">查看表结构</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628760">查看基本结构语句 DESCRIBE</a></span></dt>
<dt><span class="sect2"><a href="#id628771">查看表详细结构语句 SHOW CREATE TABLE</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628777">修改表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628785">修改表名</a></span></dt>
<dt><span class="sect2"><a href="#id628796">修改字段的数据类型</a></span></dt>
<dt><span class="sect2"><a href="#id628807">修改字段名</a></span></dt>
<dt><span class="sect2"><a href="#id628818">增加字段</a></span></dt>
<dt><span class="sect2"><a href="#id628828">删除字段</a></span></dt>
<dt><span class="sect2"><a href="#id628839">修改字段的排列位置</a></span></dt>
<dt><span class="sect2"><a href="#id628845">更改表的存储引擎</a></span></dt>
<dt><span class="sect2"><a href="#id628856">删除表的外键约束</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628862">删除表</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628867">删除没有被关联的普通表</a></span></dt>
<dt><span class="sect2"><a href="#id628872">删除被其他表关联的父表</a></span></dt>
</dl></dd>
</dl>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628570"></a>创建表</h2></div></div></div>
<p>创建表是指在已在的数据库中建立新表。这是建立数据库最重要的一步，是进行其他表操作的基础。</p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628579"></a>创建表的语法形式</h3></div></div></div>
<p><b>MYSQL中，创建表是通过 SQL语句 CREATE TABLE实现的. </b></p>
<pre class="screen">
CREATE TABLE 表名(属性名 数据类型 [完整性约束条件],
属性名字数据类型 [完整性约束条件],
....
属性名 数据类型
);
            </pre>
<div class="table">
<a name="id628594"></a><p class="title"><b>Table 3.1. MYSQL中基本的完整性约束条件</b></p>
<div class="table-contents"><table summary="MYSQL中基本的完整性约束条件" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>约束条件</th>
<th>说明</th>
</tr></thead>
<tbody>
<tr>
<td>PRIMARY KEY</td>
<td>标识该属性为该表的主键，可以唯一的标识对应的元素</td>
</tr>
<tr>
<td>FOREIGN KEY</td>
<td>标识该属性为该表的外键，是与之联系的某主键</td>
</tr>
<tr>
<td>NOT NULL</td>
<td>标识该属性不能为空</td>
</tr>
<tr>
<td>AUTO_INCREMENT</td>
<td>标识该属性的值自动增加，审MYSQL的SQL语句的特色</td>
</tr>
<tr>
<td>DEFAULT</td>
<td>为该属性设置默认值</td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break"></p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628682"></a>设置表的主键</h3></div></div></div>
<p>主键是表的一个特殊字段。该字段能唯一标识该表中的每条信息。主键的记录的关系是，如同身份证与人的关系。</p>
<p><b>单字段主键. </b></p>
<pre class="screen">
属性名 数据类型 PRIMARY KEY
mysql&gt; CREATE TABLE table6 (id INT PRIMARY KEY,
-&gt; name VARCHAR(20),
-&gt; SEX BOOLEAN);
                </pre>
<p><b>多字段主键. </b></p>
<pre class="screen">
PRIMARY KEY(属性名,属性名,...)
mysql&gt; CREATE TABLE table7(id INT,
-&gt; uid INT,
-&gt; name VARCHAR(10),
-&gt; PRIMARY KEY(id,uid));
Query OK, 0 rows affected (0.05 sec)
            </pre>
</div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628713"></a>设置表的外键</h3></div></div></div></div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628718"></a>设置表的非空约束</h3></div></div></div>
<p>非空性是指字段的值不能为空值。非空约束将保证所有记录中该字段都有值。如果用户插入空值，则数据库会提示出错</p>
<pre class="screen">
属性名 数据类型 NOT NULL
            
mysql&gt; CREATE TABLE table8(id INT,
-&gt; name VARCHAR(30) NOT NULL);
            </pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628732"></a>设置表的属性自动增加</h3></div></div></div>
<pre class="screen">属性名 数据类型 AUTO_INCREMENT</pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628743"></a>设置表的属性的默认值</h3></div></div></div>
<pre class="screen">属性名 数据类型 DEFAULT 默认值</pre>
</div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628755"></a>查看表结构</h2></div></div></div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628760"></a>查看基本结构语句 DESCRIBE</h3></div></div></div>
<pre class="screen">
DESC/DESCRIBE 表名;
**************************************
mysql&gt; DESC table6;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| id    | int(11)     | NO   | PRI | NULL    |       |
| name  | varchar(20) | YES  |     | NULL    |       |
| SEX   | tinyint(1)  | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
3 rows in set (0.01 sec)
            </pre>
</div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628771"></a>查看表详细结构语句 SHOW CREATE TABLE</h3></div></div></div></div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628777"></a>修改表</h2></div></div></div>
<p>修改表是指修改数据库中已经表的定义。修改表比重新定义表简单，不需要重新加载数据，也不会影响正在进行的服务。MYSQL可以通过ALTER TABLE来修改表。</p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628785"></a>修改表名</h3></div></div></div>
<pre class="screen">
ALTER TABLE 旧表名 RENAME [to] 新表名
**************************************
mysql&gt; ALTER TABLE table6 RENAME table5;
Query OK, 0 rows affected (0.02 sec)
</pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628796"></a>修改字段的数据类型</h3></div></div></div>
<pre class="screen">
ALTER TABLE 表名 MODIFY 属性名 数据类型
*******************************************
mysql&gt; ALTER TABLE table8 MODIFY name CHAR(10);
</pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628807"></a>修改字段名</h3></div></div></div>
<pre class="screen">
ALTER TABLE 表名 CHANGE 旧属性名 新属性名 新数据类型;
*****************************************************
mysql&gt; ALTER TABLE table8 CHANGE  name username VARCHAR(32);
</pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628818"></a>增加字段</h3></div></div></div>
<pre class="screen">
ALTER TABLE 表名 ADD 属性名1 数据类型 [完整性约束条件] [FIRST | AFTER 属性名2]
***********************************************************************************
mysql&gt; ALTER TABLE table8 ADD pass VARCHAR(10);
</pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628828"></a>删除字段</h3></div></div></div>
<pre class="screen">
ALTER TABLE 表名 DROP 属性名;
</pre>
</div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628839"></a>修改字段的排列位置</h3></div></div></div></div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628845"></a>更改表的存储引擎</h3></div></div></div>
<pre class="screen">
ALTER TABLE 表名 ENGINE=存储引擎
***************************************
mysql&gt; ALTER TABLE table8 ENGINE=Innodb;
</pre>
</div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628856"></a>删除表的外键约束</h3></div></div></div></div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628862"></a>删除表</h2></div></div></div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628867"></a>删除没有被关联的普通表</h3></div></div></div></div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id628872"></a>删除被其他表关联的父表</h3></div></div></div></div>
</div>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="id628879"></a>Chapter 4. 数据库索引</h1></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#id628887">索引简介</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id628896">索引的含义和特点</a></span></dt>
<dt><span class="sect2"><a href="#id628914">索引的分类</a></span></dt>
<dt><span class="sect2"><a href="#id628956">索引的设计原则</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id628992">创建索引</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id629000">查看表的数据结构及索引</a></span></dt>
<dt><span class="sect2"><a href="#id629011">创建表的时候创建索引</a></span></dt>
<dt><span class="sect2"><a href="#id629046">在已经存在的表上创建索引</a></span></dt>
<dt><span class="sect2"><a href="#id629108">用ALTER TABLE 语句来创建索引</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id629126">删除索引</a></span></dt>
</dl>
</div>
<p>数据库索引 </p>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628887"></a>索引简介</h2></div></div></div>
<p>
         索引是由数据库表中一列或多列组合而成，其作用是提高对表中数据的查询速度。
      </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628896"></a>索引的含义和特点</h3></div></div></div>
<p><b>索引的含义. </b>
            索引就是加快检索表中数据的方法。数据库的索引类似于书籍的索引。在书籍中，索引允许用户不必翻阅完整个书就能迅速地找到所需要的信息。在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。
        </p>
<p><b>索引的特点. </b>
            1.索引可以加快数据库的检索速度 
            2.索引降低了数据库插入、修改、删除等维护任务的速度 
            3.索引创建在表上，不能创建在视图上 
            4.索引既可以直接创建，也可以间接创建 
            5.可以在优化隐藏中，使用索引 
            6.使用查询处理器执行SQL语句，在一个表上，一次只能使用一个索引
        </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628914"></a>索引的分类</h3></div></div></div>
<p><b>普通索引. </b>
            在创建索引时，不附加任何限制条件。这类索引可以创建在任何数据类型中，其值是否唯一和非空由字段本身的完整性约束条件决定。建立
            索引以后，查询时可以通过索引进行查询。
        </p>
<p><b>唯一性索引. </b>
            使用unique 参数可以设置索引为唯一性索引。在创建唯一性索引时，限制该索引的值必须是唯一的。
        </p>
<p><b>全文索引. </b>
            使用 FULLTEXT 参数可以设置索引为全文索引。全文索引只能创建在 CHAR,VARCHAR,TEXT类型的字段上。查询数据量较大的字符串类型的字段时
            ，使用全文索引可以大大提高了查询速度。
        </p>
<p><b>单列索引. </b>
            在表中的单个字段上创建索引。单列索引只根据该字段进行索引
        </p>
<p><b>多列索引. </b>
            多列索引是在表中的多个字段丰创建一个索引。该索引指向创建时对应的多个字段。
        </p>
<p><b>空间索引. </b>
            使用SPATIAL参数可以设置索引为空间索引。空间索引只能建立在空间数据类型上，这样可以提高了系统获取空间数据的效率。
            MYSQL中的空间数据类型包括GENOMETRY和POINT、LINESTRING和POLYGON等。目前只有MYISAM存储引擎支持空间索引，而且索引字段
            不能为空值。
        </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id628956"></a>索引的设计原则</h3></div></div></div>
<p><b>选择唯一性索引. </b></p>
<p><b>为经常需要排序、分组和联合操作的字段建立索引. </b></p>
<p><b>为常作为查询条件的字段建立索引. </b></p>
<p><b>限制索引的数目. </b></p>
<p><b>尽量使用数据量少的索引. </b></p>
<p><b>尽量使用前缀来索引. </b></p>
</div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id628992"></a>创建索引</h2></div></div></div>
<p>创建索引是指在某个表的一列或多列上建立一个索引，以便提高对表的访问速度。</p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id629000"></a>查看表的数据结构及索引</h3></div></div></div>
<pre class="screen">
mysql&gt;SHOW CREATE TABLE member \G
*************************** 1. row ***********************
       Table: member
Create Table: CREATE TABLE `member` (
  `id` int(11) NOT NULL,
  `username` varchar(32) NOT NULL,
  `password` varchar(32) NOT NULL,
  `remark` text NOT NULL,
  UNIQUE KEY `index_username` (`username`),
  UNIQUE KEY `index_id` (`id`),
  FULLTEXT KEY `remark` (`remark`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
            </pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id629011"></a>创建表的时候创建索引</h3></div></div></div>
<p><b>创建普通索引. </b>
                创建普通索引时不需要加任何union fulltext或者spatial
                例如：
                </p>
<pre class="screen">
mysql&gt; CREATE TABLE table1(id int,
-&gt; name VARCHAR(20),
-&gt; sex BOOLEAN,
-&gt; INDEX(id));


mysql&gt; desc select * from table1 where id=1 \G
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: table1
         type: ref
possible_keys: id
          key: id
      key_len: 4
          ref: const
         rows: 1
        Extra:
1 row in set (0.02 sec)

                </pre>
<p><b>创建唯一性索引. </b>
                创建唯一性索引时，
                </p>
<pre class="screen">
create table table2 (id INT UNIQUE,)' at line 1
mysql&gt; create table table2 (id INT UNIQUE,
    -&gt; name VARCHAR(20),
    -&gt; UNIQUE INDEX index2_id(id ASC));
Query OK, 0 rows affected (0.04 sec)
                </pre>
<p><b>创建全文索引. </b>
                全文索引只能创建在CHAR、VARCHAR、TEXT类型的字段上。而且现在只有MYISAM存储引擎支持全文索引。
            </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id629046"></a>在已经存在的表上创建索引</h3></div></div></div>
<p><b>创建唯一性索引. </b></p>
<pre class="screen">
mysql&gt; CREATE UNIQUE INDEX index3_id ON table3(id);
            </pre>
<p><b>创建全文性索引. </b></p>
<pre class="screen">
mysql&gt; CREATE FULLTEXT INDEX index3_username ON table3(username);
        </pre>
<p><b>创建单列索引. </b></p>
<pre class="screen">
mysql&gt; CREATE INDEX index_user ON table3(username);
        </pre>
<p><b>创建多列索引. </b></p>
<pre class="screen">
mysql&gt; CREATE INDEX index_use_pass ON table3(username,pass);
        </pre>
<p><b>创建空间索引. </b></p>
<pre class="screen">
CREATE SPATIAL INDEX index_pass ON table3(pass);
        </pre>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="id629108"></a>用ALTER TABLE 语句来创建索引</h3></div></div></div>
<p><b>创建索引. </b>
        ALTER TABLE 表名 ADD 【UNIQUE | FULLTEXT | SPATIAL】 INDEX 索引名（属性名(长度) | ASC|DESC）;
        例如：
        </p>
<pre class="screen">
mysql&gt; ALTER TABLE table3 ADD INDEX index3_passes (pass);
        </pre>
</div>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id629126"></a>删除索引</h2></div></div></div>
<p>删除索引是指将表中已经存在的索引删除掉。一些不再使用的索引会降低表的更新速度，影响数据库的性能。对于这样的索引，应该将其删除。</p>
<p><b>DROP INDEX 索引名 ON 表名. </b></p>
<pre class="screen">
mysql&gt; SHOW CREATE TABLE table2 \G
*************************** 1. row ************
       Table: table2
Create Table: CREATE TABLE `table2` (
  `id` int(11) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  UNIQUE KEY `id` (`id`),
  UNIQUE KEY `index2_id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql&gt; DROP INDEX index2_id ON table2;
Query OK, 0 rows affected (0.05 sec)
Records: 0  Duplicates: 0  Warnings: 0

            </pre>
</div>
</div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="id629148"></a>Chapter 5. 触发器</h1></div></div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#id629152">创建触发器</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#id629157">创建只有一个执行语句的触发器</a></span></dt>
<dt><span class="sect2"><a href="#id629162">创建有多个执行语句的触发器</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#id629168">查看触发器</a></span></dt>
<dt><span class="sect1"><a href="#id629174">触发器的使用</a></span></dt>
<dt><span class="sect1"><a href="#id629180">删除触发器</a></span></dt>
</dl>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id629152"></a>创建触发器</h2></div></div></div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id629157"></a>创建只有一个执行语句的触发器</h3></div></div></div></div>
<div class="sect2"><div class="titlepage"><div><div><h3 class="title">
<a name="id629162"></a>创建有多个执行语句的触发器</h3></div></div></div></div>
</div>
<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id629168"></a>查看触发器</h2></div></div></div></div>
<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id629174"></a>触发器的使用</h2></div></div></div></div>
<div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="id629180"></a>删除触发器</h2></div></div></div></div>
</div>
</div></body>
</html>
